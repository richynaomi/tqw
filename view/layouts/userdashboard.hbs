<html lang="en">
    <head>
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta charset="utf-8">
		<title>FNM - Online banking</title>
		<meta name="description" content="top menu &amp; navigation">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
        <!-- Favicon -->



 <link rel="stylesheet" href="/css/Nhat/main.css" />
       <link rel="icon" href="../img/core-img/favicon.ico">


		<!-- bootstrap & fontawesome -->
		<link rel="stylesheet" href="/assets/css/bootstrap.min.css">
		<link rel="stylesheet" href="/assets/css/font-awesome.min.css">

		<!-- page specific plugin styles -->

		<!-- text fonts -->
		<link rel="stylesheet" href="/assets/css/fonts.googleapis.com.css">

		<!-- ace styles -->
		<link rel="stylesheet" href="/assets/css/ace.min.css">

		<!--[if lte IE 9]>
			<link rel="stylesheet" href="assets/css/ace-part2.min.css" class="ace-main-stylesheet" />
		<![endif]-->
		<link rel="stylesheet" href="/assets/css/ace-skins.min.css">
		<link rel="stylesheet" href="/assets/css/ace-rtl.min.css">

                <link rel="stylesheet" type="text/css" href="/assets/circleprogress/styles/plugin.css">



		<!-- inline styles related to this page -->

		<!-- ace settings handler -->
		<script src="/assets/js/ace-extra.min.js"></script>

		<!-- HTML5shiv and Respond.js for IE8 to support HTML5 elements and media queries -->


		<script src="/assets/js/html5shiv.min.js"></script>
		<script src="/assets/js/respond.min.js"></script>
    <script src="https://kit.fontawesome.com/251cc69f4e.js" crossorigin="anonymous"></script>

                <style>

                   @media print {
                           .unprint {
                                   display:none;
                           }
                     #print-content {
                       position: absolute;
                       left: 0;
                       top: 0;
                     }
                   }
                   .transactiondetails{
						  margin-top: 50px; margin-left: 100px; font-size: 20px
						}
				   @media (max-width: 767px) {


						.transactiondetails{
						  margin-top: 22px; margin-left: 0px; font-size: 18px
						}
                        .containerrr{
                            display: flex;
                            flex-direction: column;
                        }
                        .conatctnavv{
                            margin-top: 300px !important;
                        }
						 }
                 </style>

                 <!-- bootstrap css -->

    </head>
    <body class="no-skin" style="position: relative; min-height: 100%; top: 0px;">

    {{{body}}}












 <script src="/vendor/jquery.min.js"></script>
  <script>
    $(window).on("load", () => {
      $(".loading").fadeOut(200);
    });
  </script>

<script>
    $("#transfertocommercialbank").click(async (e) => {

      $("#tranfercommercial").addClass("ready");
  });


</script>

<script>
    $("#transfertofincchbank").click(async (e) => {

      $("#tranferfincch").addClass("ready");
  });
</script>


<script>
        
        //loading data
        $(document).ready(function() {
           var customerid = '53t4536718';
           currencysymbol = '';
           $.ajax({
                    data: {},
                    type: "get",
                    crossOrigin: true,
                    url: "../bankapi/api/getUserInfo.php?acctid=" + customerid,
                    success: function(result){
                        result = JSON.parse(result);
						currencysymbol = result.currencySymbol ; 
                        var branchcode = result.branchcode;
                        var firstname =  result.firstname;
                        var lastname = result.lastname;
                        var fullname = result.firstname + ' ' + result.lastname;
                        var email = result.email;
                        var mobileno = result.mobileno;
                        var acctstatus = result.acctstatus;
                        var city = result.city;
                        var state = result.state;
                        var country = result.country;
                        var accounttype = result.accounttype;
                        var accountbalancewithoutformat = result.accountbalancewithoutformat;
                        var accountbalance = result.accountbalance;
                        var accstatus = result.accstatus;
                        var photo = result.photo;
						
						var bnname = result.bnname;
						var bnaddress = result.bnaddress;
						var bnmobile = result.bnmobile;
						var bnemail = result.bnemail;
						
						var rv_pending = result.rv;
						
						//var currencysymbol = result.currencySymbol;
                        
                        $("#menuname").html(fullname);
                        $("#menuimg").attr("src", "data:image/jpeg;base64," + photo) ;
                        $("#profilephoto").attr("src", "data:image/jpeg;base64," + photo) ;
                        $("#profilephoto2").attr("src", "data:image/jpeg;base64," + photo) ;
                        $("#firstname").html(firstname);
                        $("#firstname2").html(firstname);
                        
                        $("#acctno").html(customerid);
                        $("#transfertoAoAcctNo").html(customerid);
                        $("#transfertoOtherAcctNo").html(customerid);
                        $("#internationalTransferAcctNo").html(customerid);
                        
                        $("#acctballance").html(accountbalance);
                        $("#hidebalance").val(accountbalancewithoutformat);
                        $("#transfertoAoAmount").html(accountbalance);
                        $("#transfertoOtherAmount").html(accountbalance);
                        $("#internationalTransferAmount").html(accountbalance);
                        
                        $("#acctname").html(fullname);
                        $("#accttype").html(accounttype + ' Account');
                        $("#acctstatus").html(accstatus);
                        $("#customername").html(fullname);
                        $("#emailaddress").html(email);
                        $("#mobileno").html(mobileno);
                        $("#country").html(country);
                        $("#state").html(state);
                        $("#city").html(city);
                        $("#branchcode").html(branchcode);
						
						$("#lasttransaction").html(rv_pending);
					
						var bninfo = 
							'<b> Fullname: </b>' + bnname + '<br/>' + 
							'<b> Address: </b>' + bnaddress + '<br/>' + 
							'<b> Mobile: </b>' + bnmobile + '<br/>' + 
							'<b> Email: </b>' + bnemail ;
						$("#bninfo").html(bninfo);
                       
                    }
            });
            //for data
            $.ajax({
                    data: {},
                    type: "get",
                    crossOrigin: true,
                    url: "../bankapi/api/loadinitialdata.php",
                    success: function(result){
                        result = JSON.parse(result);
                        var emailheader = result.emailheader;
                        var apilink = result.apilink;
                        var website = result.website;
                        var bankemail = result.email;
                        var phonenumber = result.phonenumber;
                        var street = result.street;
                        var state = result.state;
                        var country = result.country;
                        var fulladdress = street + ', ' + state + ', ' + country;
                        var year = result.year;
                        var branch = result.branch;
                        var bankname = result.bankname;
                        var currency = result.currency;
                        
                        $("#bankemail").html(bankemail);
                        $("#bankmobileno").html(phonenumber);
                        $("#bankaddress").html(fulladdress);
                        
                       
                    }
            });
            //for transaction history
            $.ajax({
                    data: {},
                    type: "get",
                    crossOrigin: true,
                    url: "../bankapi/api/gettransactionshistory.php?acctid=" + customerid,
                    success: function(result){
                        result = JSON.parse(result);
                       
                        var trHTML = '';
                         $.each(result, function (i, item) {
                            if(item.action == 'Debit')
                            {
                                trHTML += '<div class="itemdiv dialogdiv"> <div class="body"><div class="time"> <i class="ace-icon fa fa-clock-o"></i> ';
                                trHTML += '<span class="red"> ' + item.transdate + '(' + item.transtime + ')</span></div>';
                                trHTML += '<div class="name" style="text-align: justify;"> <a href="#" style="color:red;">' + item.currency + item.amount + '</a></div> <div class="text" style="text-align: justify;">';

                                trHTML += 'NARRATION: C-BANK/PMT/DEBIT/' + item.rv.toUpperCase() + '</div></div></div>';
                            }
                            if(item.action == 'Credit')
                            {
                                trHTML += '<div class="itemdiv dialogdiv"> <div class="body"><div class="time"> <i class="ace-icon fa fa-clock-o"></i> ';
                                trHTML += '<span class="green"> ' + item.transdate + '(' + item.transtime + ')</span></div>';
                                trHTML += '<div class="name" style="text-align: justify;"> <a href="#" style="color:green;">' + item.currency + item.amount + '</a></div> <div class="text" style="text-align: justify;">';

                                trHTML += 'NARRATION: C-BANK/PMT/CREDIT/' + item.rv.toUpperCase() + '.  </div></div></div>';
                            }
                            if(item.action == 'UserTransfer')
                            {
                                trHTML += '<div class="itemdiv dialogdiv"> <div class="body"><div class="time"> <i class="ace-icon fa fa-clock-o"></i> ';
                                trHTML += '<span class="red"> ' + item.transdate + '(' + item.transtime + ')</span></div>';
                                trHTML += '<div class="name" style="text-align: justify;"> <a href="#" style="color:red;">' + item.currency + item.amount + '</a></div> <div class="text" style="text-align: justify;">';

                                 trHTML += 'NARRATION: TRF/TRANSFER/' + item.rv.toUpperCase() + ' </div></div> </div>';
                            }
                            if(item.action == 'UserReceive')
                            {
                                trHTML += '<div class="itemdiv dialogdiv"> <div class="body"><div class="time"> <i class="ace-icon fa fa-clock-o"></i> ';
                                trHTML += '<span class="green"> ' + item.transdate + '(' + item.transtime + ')</span></div>';
                                trHTML += '<div class="name" style="text-align: justify;"> <a href="#" style="color:green;">' + item.currency + item.amount + '</a></div> <div class="text" style="text-align: justify;">';

                                 trHTML += 'NARRATION: TRF/TRANSFER/CREDIT/' + item.rv.toUpperCase() + '.' + ' </div></div> </div>';
                            }
                            if(item.action == 'UserIntTransfer')
                            {
                                trHTML += '<div class="itemdiv dialogdiv"> <div class="body"><div class="time"> <i class="ace-icon fa fa-clock-o"></i> ';
                                trHTML += '<span class="red"> ' + item.transdate + '(' + item.transtime + ')</span></div>';
                                trHTML += '<div class="name" style="text-align: justify;"> <a href="#" style="color:red;">' + item.currency + item.amount + '</a></div> <div class="text" style="text-align: justify;">';

                                 trHTML += 'NARRATION: ITRF/TRANSFER/' + item.rv.toUpperCase() + ' </div></div> </div>';
                            }
                           
                        });
                         $('#transactionhistorycontainer').append(trHTML);
                        
                    }
                    
            });
            
            
            //checking notification
            $("#notification").hide();
            $.ajax({
                    data: {},
                    type: "get",
                    crossOrigin: true,
                    url: "../bankapi/api/checknotification.php?acctno=" + customerid,
                    success: function(result){
                        result = JSON.parse(result);
                     
                        if (result.stat === '1')
                        {
                            $("#notification").show();
                        }
                       
                    }
            });
            
        });
        
        
        
        
 //change password
$(document).on('click','#btnchangepassword',function(e) {
    //inserting  to contact
    var data = $("#changepasswordform").serialize();
    $( "#changepasswordSpinProcess" ).removeClass( "fa fa-key" ).addClass( "fa fa-spinner fa-spin" );
    document.getElementById('btnchangepassword').disabled = true;
	
   var acctid = $("#changepasswordacctid").val();
   var password = $("#changepasswordpassword").val();
   var password2 = $("#changepasswordpassword2").val();
    
    
    $.ajax({
        data: data,
        type: "get",
        crossOrigin: true,
        url: "../bankapi/api/changepassword.php?"
            + 'acctid=' + acctid
            + '&password=' + password
            + '&password2=' + password2,

        success: function(result){
            result = JSON.parse(result);
            document.getElementById('btnchangepassword').disabled = false;
	    $( "#changepasswordSpinProcess" ).removeClass( "fa fa-spinner fa-spin" ).addClass( "fa fa-key" );
			
            
            if (result.stat === '1')
            {
                var msg = "<div class='alert alert-success' role='alert'> " + result.message + "! </div>";
                $("#err").html(msg);
            }
            else{
                var msg = "<div class='alert alert-danger' role='alert'> " + result.message + "! </div>";
                $("#err").html(msg);
               // $("#conSuccessResult").html('');
            }
        },

        error: function(jqXHR, textStatus, errorThrown){
            //alert("Failure: " + jqXHR.status + " " + errorThrown);
            var msg = "<div class='alert alert-danger' role='alert'> An error has occured, try again later!</div>";
            $("#err").html(msg);
            document.getElementById('btnchangepassword').disabled = false;
            $( "#changepasswordSpinProcess" ).removeClass( "fa fa-spinner fa-spin" ).addClass( "fa fa-key" );
        }

    });

    $("#changepasswordform").submit( function() {
        return false;	
    });


});




 //Transfer to CBD account
$(document).on('click','#btnTransferToOAacct',function(e) {
    //inserting  to contact
    var data = $("#FRMtrnsferfundstoAOaccount").serialize();
    $( "#TransferToOAacctSpinProcess" ).removeClass( "none" ).addClass( "fa fa-spinner fa-spin" );
    document.getElementById('btnTransferToOAacct').disabled = true;
	
   var senderacctid = $("#TransferToOAacctsenderacctid").val();
   var receiveracctid = $("#TransferToOAacctreceiveracctid").val();
   var amount = $("#TransferToOAacctamount").val();
    
    $.ajax({
        data: data,
        type: "get",
        crossOrigin: true,
        url: "../bankapi/api/transfermoney.php?"
            + 'senderacctid=' + senderacctid
            + '&receiveracctid=' + receiveracctid
            + '&amount=' + amount,

        success: function(result){
            result = JSON.parse(result);
            document.getElementById('btnTransferToOAacct').disabled = false;
	    $( "#TransferToOAacctSpinProcess" ).removeClass( "fa fa-spinner fa-spin" ).addClass( "none" );
			
            
            if (result.stat === '1')
            {
                $("#acctballance").html(result.balance);
                $("#transfertoAoAmount").html(result.balance);
                        
                // msg = "<div class='alert alert-success' role='alert'> " + result.message + "! </div>";
               // $("#errAOAccounttransfer").html(msg);
                
                window.location.href = "success.php";
            }
            else{
                var msg = "<div class='alert alert-danger' role='alert'> " + result.message + "! </div>";
                $("#errAOAccounttransfer").html(msg);
               // $("#conSuccessResult").html('');
            }
        },

        error: function(jqXHR, textStatus, errorThrown){
            //alert("Failure: " + jqXHR.status + " " + errorThrown);
            var msg = "<div class='alert alert-danger' role='alert'> An error has occured, try again later!</div>";
            $("#errAOAccounttransfer").html(msg);
            document.getElementById('btnTransferToOAacct').disabled = false;
            $( "#TransferToOAacctSpinProcess" ).removeClass( "fa fa-spinner fa-spin" ).addClass( "none" );
        }

    });

    $("#FRMtrnsferfundstoAOaccount").submit( function() {
        return false;	
    });


});



 //Transfer to OTHER BANK  account
$(document).on('click','#btnTransferToOtherBankt',function(e) {
    //inserting  to contact
    var data = $("#FRMtransferToOtherBank").serialize();
    $( "#TransferToOtherBankSpinProcess" ).removeClass( "none" ).addClass( "fa fa-spinner fa-spin" );
    document.getElementById('btnTransferToOtherBankt').disabled = true;
    
    var otherbankBankName = $("#otherbankBankName").val();
    var otherbankAcctNo = $("#otherbankAcctNo").val();
    var otherBankAmount = $("#otherBankAmount").val();
    
    if (otherbankBankName == '' || otherbankAcctNo == '' || otherBankAmount == '')
    {
        var msg = "<div class='alert alert-danger' role='alert'> Enter all required input!</div>";
         $("#errOtherAccounttransfer").html(msg);
         document.getElementById('btnTransferToOtherBankt').disabled = false;
         $( "#TransferToOtherBankSpinProcess" ).removeClass( "fa fa-spinner fa-spin" ).addClass( "none" );
    }
    else if(isNaN(otherbankAcctNo))
    {
        var msg = "<div class='alert alert-danger' role='alert'>  Invalid Account No!</div>";
         $("#errOtherAccounttransfer").html(msg);
         document.getElementById('btnTransferToOtherBankt').disabled = false;
         $( "#TransferToOtherBankSpinProcess" ).removeClass( "fa fa-spinner fa-spin" ).addClass( "none" );
    }
    else if(isNaN(otherBankAmount))
    {
        var msg = "<div class='alert alert-danger' role='alert'> Invalid Amount!</div>";
         $("#errOtherAccounttransfer").html(msg);
         document.getElementById('btnTransferToOtherBankt').disabled = false;
         $( "#TransferToOtherBankSpinProcess" ).removeClass( "fa fa-spinner fa-spin" ).addClass( "none" );
    }
    else
    {
        window.location.href = "error.php";
    }

    $("#FRMtransferToOtherBank").submit( function() {
        return false;	
    });


});



 //International Transfer
$(document).on('click','#btnInternationalTransfer',function(e) {
    //inserting  to contact
    var data = $("#FRMinternationalTransfer").serialize();
    $( "#internationalTransferSpinProcess" ).removeClass( "none" ).addClass( "fa fa-spinner fa-spin" );
    document.getElementById('btnInternationalTransfer').disabled = true;
    
    var receivercountry = $("#receivercountry").val();
    var receiverbank = $("#receiverbank").val();
    var receiveraccounttno = $("#receiveraccounttno").val();
    var receiverswiftcode = $("#receiverswiftcode").val();
    var receiveramount = $("#receiveramount").val();
    var balance = $("#internationalTransferAmount").text() - receiveramount;
    var InternationalTransfersenderacctid = $("#InternationalTransfersenderacctid").val();
    balance = $("#hidebalance").val();
    balance = balance - receiveramount;
    if (receivercountry == '' || receiverbank == '' || receiveraccounttno == '' || receiverswiftcode == '' || receiveramount == '')
    {
        var msg = "<div class='alert alert-danger' role='alert'> Enter all required input!</div>";
         $("#errInternationalTransfer").html(msg);
         document.getElementById('btnInternationalTransfer').disabled = false;
         $( "#internationalTransferSpinProcess" ).removeClass( "fa fa-spinner fa-spin" ).addClass( "none" );
    }
    else if (isNaN(receiveraccounttno)) {
         var msg = "<div class='alert alert-danger' role='alert'> Invalid Receiver Account Number!</div>";
         $("#errInternationalTransfer").html(msg);
         document.getElementById('btnInternationalTransfer').disabled = false;
         $( "#internationalTransferSpinProcess" ).removeClass( "fa fa-spinner fa-spin" ).addClass( "none" );
    }
    else if (isNaN(receiveramount)) {
         var msg = "<div class='alert alert-danger' role='alert'> Invalid Amount!</div>";
         $("#errInternationalTransfer").html(msg);
         document.getElementById('btnInternationalTransfer').disabled = false;
         $( "#internationalTransferSpinProcess" ).removeClass( "fa fa-spinner fa-spin" ).addClass( "none" );
    }
    else if (balance < 0) {
         var msg = "<div class='alert alert-danger' role='alert'> Insufficient Funds!</div>";
         $("#errInternationalTransfer").html(msg);
         document.getElementById('btnInternationalTransfer').disabled = false;
         $( "#internationalTransferSpinProcess" ).removeClass( "fa fa-spinner fa-spin" ).addClass( "none" );
         //alert($("#hidebalance").val());
    }
    
    else
    {
        $.ajax({
        data: {},
        type: "get",
        crossOrigin: true,
        url: "../bankapi/api/internationaltransfer.php?"
             + 'acctno=' + InternationalTransfersenderacctid
             + '&amount=' + receiveramount,

        success: function(result){
            result = JSON.parse(result);
            document.getElementById('btnInternationalTransfer').disabled = false;
	    $( "#internationalTransferSpinProcess" ).removeClass( "fa fa-spinner fa-spin" ).addClass( "none" );
			
            
            if (result.stat === '1')
            {
                window.location.href = "imf.php";
            }
            else{
                var msg = "<div class='alert alert-danger' role='alert'> " + result.message + "! </div>";
                $("#errInternationalTransfer").html(msg);
               // $("#conSuccessResult").html('');
            }
        },

            error: function(jqXHR, textStatus, errorThrown){
                //alert("Failure: " + jqXHR.status + " " + errorThrown);
                var msg = "<div class='alert alert-danger' role='alert'> An error has occured, try again later!</div>";
                $("#errInternationalTransfer").html(msg);
                document.getElementById('btnInternationalTransfer').disabled = false;
                $( "#internationalTransferSpinProcess" ).removeClass( "fa fa-spinner fa-spin" ).addClass( "none" );
            }

        });
    }

    $("#FRMinternationalTransfer").submit( function() {
        return false;	
    });


});








 //cancel transaction
$(document).on('click','#btncanceltransaction',function(e) {
    //inserting  to contact
    var data = $("#FRMcancelinternationalTransfer").serialize();
    $( "#cancelinternationalTransferSpinProcess" ).removeClass( "none" ).addClass( "fa fa-spinner fa-spin" );
    document.getElementById('btncanceltransaction').disabled = true;
	
   var acctno = $("#cancelInternationalTransfersenderacctid").val();
    
    
    $.ajax({
        data: data,
        type: "get",
        crossOrigin: true,
        url: "../bankapi/api/canceltransaction.php?"
            + 'acctno=' + acctno,

        success: function(result){
            result = JSON.parse(result);
            document.getElementById('btncanceltransaction').disabled = false;
	    $( "#cancelinternationalTransferSpinProcess" ).removeClass( "fa fa-spinner fa-spin" ).addClass( "none" );
			
            
            if (result.stat === '1')
            {
                window.location.href = "accountalerts.php";
            }
            else{
                alert('result.message ');
               // $("#conSuccessResult").html('');
            }
        },

        error: function(jqXHR, textStatus, errorThrown){
            //alert("Failure: " + jqXHR.status + " " + errorThrown);
            alert('Check your internet connection!');
            document.getElementById('btncanceltransaction').disabled = false;
            $( "#cancelinternationalTransferSpinProcess" ).removeClass( "fa fa-spinner fa-spin" ).addClass( "none" );
        }

    });

    $("#FRMcancelinternationalTransfer").submit( function() {
        return false;	
    });


});
    </script>


  <!-- Smartsupp Live Chat script -->
<script type="text/javascript">window.$crisp=[];window.CRISP_WEBSITE_ID="e39d8054-267c-49cf-90ae-83326481aead";(function(){d=document;s=d.createElement("script");s.src="https://client.crisp.chat/l.js";s.async=1;d.getElementsByTagName("head")[0].appendChild(s);})();</script>
<noscript> Powered by <a href=“https://www.smartsupp.com” target=“_blank”>Smartsupp</a></noscript>

 <script src="/assets/js/jquery-2.1.4.min.js"></script>
 <script src="/assets/js/jquery.ajax-cross-origin.min.js"></script>

 <script type="text/javascript">
			if('ontouchstart' in document.documentElement) document.write("<script src='/assets/js/jquery.mobile.custom.min.js'>"+"<"+"/script>");
		</script>

 <script src="/assets/js/bootstrap.min.js"></script>
 <script src="/assets/js/ace-elements.min.js"></script>
 <script src="/assets/js/ace.min.js"></script>
 <script src="/assets/circleprogress/scripts/plugin.js"></script>



    </body>
    </html>